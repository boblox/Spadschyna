@inherits Umbraco.Web.Macros.PartialViewMacroPage
@{
    var container = Model.Content
        .AncestorOrSelf(1)
        .FirstChild<BoardContainer>();
    var items = container
        .Children<BoardMember>()
        .ToList();

}

@if (Request.RawUrl.Contains("GetMacroResultAsHtmlForEditor"))
{
    <span>@container.GetTitle()</span>
}
else
{
    <article class="board-members-container">
        @*<header class="title">
                <h2>@container.GetTitle()</h2>
        </header>*@
        <div class="row">
            @for (var i = 0; i < items.Count; i++)
            {
                var item = items[i];
                var image = item.Image;
                <div class="col-sm-8">
                    <article class="board-member center-block">
                        @if (image != null)
                        {
                            var imageUrl = image.Src + image.GetCropUrl(image.Crops.First().Alias);
                            <img class="img-responsive img-circle" src="@imageUrl" alt="" />
                        }
                        <header class="title">
                            <h4>@item.GetTitle()</h4>
                        </header>
                        <div class="pseudo">@item.Pseudo</div>
                        <div class="management-area">@item.ManagementArea</div>
                    </article>
                </div>
                if ((i + 1) % 3 == 0)
                {
                    <div class="clearfix hidden-xs"></div>
                }
            }
        </div>
    </article>
}